<!DOCTYPE html>
<html>
  <head>
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
  <link href='//fonts.googleapis.com/css?family=Noto+Sans' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
     <style type="text/css">
    .ui-datepicker {
    background: #333;
    border: 1px solid #555;
    color: #EEE;
  }
  </style>
    <script>
    var $j = jQuery.noConflict();
    $j(document).ready(function(){
     $j(function() {
      $j( ".datepicker" ).datepicker();
      });
      });
    </script>

<!-- starting map  -->

    <title><%= full_title(yield(:title)) %></title>
    <%= stylesheet_link_tag "application", media: "all",
                                           "data-turbolinks-track" => true %>
    <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
    <script>
geocoder = new google.maps.Geocoder();

var mapcenter = new google.maps.LatLng(41.3100, -72.9236);

var locations = ["old campus"]

var markers = [];
var iterator = 0;

var map;

function initialize() {
  var mapOptions = {
    zoom: 14,
    center: mapcenter
  };

  map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);
}

function drop() {
  for (var i = 0; i < locations.length; i++) {
    setTimeout(function() {
      addMarker();
    }, (i + 1) * 300);
  }
}

function getCoordinates(address, callback) {
var coordinates;
geocoder.geocode({ address: address}, function (results, status) {
 coords_obj = results[0].geometry.location;
 coordinates = [coords_obj.B,coords_obj.k];
 callback(coordinates);
 })
}

function addMarker() {
getCoordinates(locations[iterator], function(coords){
  markers.push(new google.maps.Marker({
    position: new google.maps.LatLng(coords[1], coords[0]),
    map: map,
    draggable: false,
    animation: google.maps.Animation.DROP
  }));
  iterator++;
});
}

window.onload = drop();
</script>
<!-- <style>
      #map-canvas {
        height: 300px;
        width:500px;
        margin: 0px;
        padding: 0px
      }
    </style> -->
    <script>
google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>

  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <p class="navbar-text pull-right">
      <% if user_signed_in? %>
        Logged in as <strong><%= current_user.name %></strong>.
      <% end %> 
      <%= yield %> <br>
      <%= render 'layouts/footer' %>
    </div>
  </body>
</html>